!function e(t,n,i){function r(a,l){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){function i(e){a=new l(e),a.validateSetupObject()&&a.doInitialSetup()}function r(e){a.validateSetupObject()?(s.openModal(e.resize),a.load(e)):alert("Please check consoler errors.")}function o(){return{setup:i,openBrowser:r}}var a,l=e("./manager.js"),s=e("../helpers/element.js");window.FileBrowser=function(){return{getInstance:function(){return new o}}}},{"../helpers/element.js":5,"./manager.js":2}],2:[function(e,t,n){function i(e){function t(){var t=r.disksParam(e);1==t?u=e.disks:(v=!0,console.error(t));var n=r.dirParam(e);1==n?d=e.directories:(v=!0,console.error(n));var i=r.filesParam(e);1==i?f=e.files:(v=!0,console.error(i));var o=r.httpParam(e);1==o?g=e.http:(v=!0,console.error(o));var a=r.authParam(e);return 1==a?h=e.auth:(v=!0,console.error(a)),!v}function n(e){a.setupHandlers(new l,new s,new c,o),a.setupParameters(u,d,f,g,h),a.setupElementsAndEvents(e)}function i(e){a.load(e),a.updateButtonDetails(e.button)}var u,d,f,g,h,v=!1;return{validateSetupObject:t,doInitialSetup:n,load:i}}var r=e("../helpers/validate.js"),o=e("../handlers/eventHandler.js"),a=e("../handlers/handler.js"),l=e("../model/disk.js"),s=e("../model/directory.js"),c=e("../model/file.js");t.exports=i},{"../handlers/eventHandler.js":3,"../handlers/handler.js":4,"../helpers/validate.js":7,"../model/directory.js":8,"../model/disk.js":9,"../model/file.js":10}],3:[function(e,t,n){function i(){P.getFileRefreshBtn().click(function(){L.loadFiles(!0),c()})}function r(){P.getFileAlignListBtn().click(function(){L.getFileHandler().showFileList()})}function o(){P.getFileAlignGridBtn().click(function(){L.getFileHandler().showFileGrid()})}function a(){P.getSortFilesDropdown().on("change",function(){L.getFileHandler().sortFilesBy($(this).val())})}function l(){P.getSearchInput().val(""),L.getFileHandler().showFiles(),P.hide(P.getSearchCancelBtn()),P.hide(P.getFileSearchOptions())}function s(){function e(e){""==P.getSearchInput().val()?l():(P.show(P.getSearchCancelBtn()),L.getFileHandler().searchFiles(P.getSearchInput().val()),1!=e&&t())}function t(){L.isSearchEnabled()&&(P.show(P.getFileSearchOptions()),P.getFileSearchOptions().empty(),n(),i())}function n(){var t=L.getDirHandler().getCurrentDirectoryData().name;t||(t="This directory");var n=L.getDirHandler().isRootDirectory()?"root":U.slugify(t);P.getFileSearchOptions().append($(o(n,t,"fa-folder-o"))),P.selectFirst(P.getFileSearchOptions()),P.getFileSearchOptions().find("#"+n).click(function(){P.selectFirst(P.getFileSearchOptions()),e(!0)})}function i(){var e=L.getDiskParameter();if(e.details&&e.search_URL)for(var t=0,n=e.details.length;t<n;t++){var i=e.details[t],a="search_"+U.slugify(i.label);P.getFileSearchOptions().append($(o(a,i.label,"fa-server"))),r(a,e.search_URL,i.name)}}function r(e,t,n){P.getFileSearchOptions().find("#"+e).click(function(){function e(){alert("failed to search disk")}function i(e){L.getFileHandler().showFiles(e.files,r.attr("data-disk-label")),P.select(P.getFileSearchOptions(),r)}var r=$(this),o={search:P.getSearchInput().val(),disk:n};L.makeAjaxRequest(t,i,e,!1,o)})}function o(e,t,n){return'<li id="'+e+'" data-disk-label="'+t+'"><i class="fa '+n+'" aria-hidden="true"></i>&nbsp;'+t+"</li>"}P.getSearchInput().on("change",e),P.getSearchBtn().click(e),P.getSearchCancelBtn().click(l)}function c(){P.getSearchInput().val("")}function u(e){function t(){L.getDiskHandler().isReadOnly()?(P.hide(P.getUploadFileBtn()),P.hide(P.getCreateNewDirectory())):(L.getDiskHandler().isRootReadOnly()?P.hide(P.getUploadFileBtn()):P.show(P.getUploadFileBtn()),P.show(P.getCreateNewDirectory()));var e=L.getDiskHandler().getCurrentDisk().allowed_extensions;if(e&&e.length>0){var t="";e.forEach(function(e){t+="."+e+","}),P.getUploadFileInput().attr("accept",t.substring(0,t.length-1))}else P.getUploadFileInput().removeAttr("accept");L.loadDirectories()}t(),P.getDiskDropdown().on("change",function(){t()})}function d(e,t,n){e.each(function(){var e=$(this);n&&p(e),e.find("> div").click(function(){O(),P.select(P.getDirectories(),e),L.getDirHandler().childDirOpen(e)?L.getDirHandler().hideSubDirectories(e):f(t,function(t){L.getDirHandler().showSubDirectories(e,t)}),L.loadFiles(),L.getDiskHandler().isRootReadOnly()&&(L.getDirHandler().isRootDirectory()?P.hide(P.getUploadFileBtn()):P.show(P.getUploadFileBtn()))})})}function f(e,t){function n(){alert("failed to get sub directories")}var i={};L.makeAjaxRequest(e,t,n,!1,i)}function g(e,t){function n(n){return{37:function(){L.getDirHandler().hideSubDirectories($(n.target))},39:function(){f(t,function(e){L.getDirHandler().showSubDirectories($(n.target),e)})},38:function(){P.moveUp(e,$(n.target),function(){L.loadFiles()})},40:function(){P.moveDown(e,$(n.target),function(){L.loadFiles()})},9:function(){L.getFileHandler().focusFirstElement()},13:function(){L.loadFiles()}}}e.keydown(function(t){if($(t.target).parent().is(e)){var i=new n(t);i[t.which]&&i[t.which]()}})}function h(e){function t(t){function n(e){$(e.target).is(t)||i()}function i(){var n=t.val();if(a!=n&&""!=n){var i=L.getDirHandler().getNewDirectoryData(t);L.makeAjaxRequest(e,r,o,!1,i)}else P.focusAndSelect(t)}function r(e){if(1==e.success){var i=L.getDirHandler().saveDirectory(t,e.directory.name,e.directory.path);L.attachDirectoryEvents(i)}else L.getDirHandler().removeDirectory(t);$(document).off("click",n)}function o(){L.getDirHandler().removeDirectory(t),$(document).off("click",n)}P.focusAndSelect(t),P.focusoutOnEnter(t);var a=t.val();t.on("focusout",i),$(document).click(n)}var n=P.getCreateNewDirectory();n.click(function(){var e=L.getDirHandler().addNewDirectoryToSelectedDirectory();t(e)})}function v(e,t){function n(e){function n(t){$(t.target).is(e)||i()}function i(){var n=e.val();if(a!=n&&""!=n){var i=L.getDirHandler().getCurrentDirectoryData();i.new_value=n,L.makeAjaxRequest(t,r,o,!1,i)}else L.getDirHandler().saveDirectory(e,a)}function r(){L.getDirHandler().saveDirectory(e),$(document).off("click",n)}function o(){L.getDirHandler().saveDirectory(e,a),$(document).off("click",n)}P.focusAndSelect(e),P.focusoutOnEnter(e);var a=e.val();e.on("focusout",i),$(document).click(n)}L.getDiskHandler().isReadOnly()||e.each(function(){$(this).find("> div").dblclick(function(){var e=L.getDirHandler().renameDirectory($(this));n(e)})})}function p(e){function t(e){var t=P.getDirectoryContextMenu();P.show(t),H(e,t)}L.getDiskHandler().isReadOnly()||(e.find(">div").off("contextmenu"),e.find(">div").on("contextmenu",function(n){e.find("> div").click(),t(e),B(e,P.getDirectoryContextMenu()),n.preventDefault()}))}function m(e){var t=P.getDeleteDirectory();L.getDiskHandler().isReadOnly()||(t.off("click"),t.on("click",function(){function t(e){1==e.success&&(L.getDirHandler().removeDirectory(i),P.select(P.getDirectories(),L.getDirHandler().getRootDirectory()))}function n(){}var i=L.getDirHandler().getCurrentDirectoryElement(),r=L.getDirHandler().getCurrentDirectoryData(),o={name:r.name,path:r.path};L.makeAjaxRequest(e,t,n,!1,o)}))}function F(){y(),D(),w()}function y(){P.getFilesGrid().find("li").off("click"),P.getFilesGrid().find("li").click(function(){P.select(P.getFilesGrid(),$(this)),L.getFileHandler().showFileDetails(L.getFileHandler().getCurrentFileDetails()),P.show(P.getPrimarySubmitButton()),L.getDiskHandler().isReadOnly()||P.show(P.getFileManageMenu())})}function D(){P.getFilesList().find("tbody > tr").click(function(){P.selectTableRow(P.getFilesList(),$(this)),P.show(P.getPrimarySubmitButton()),P.show(P.getFileManageMenu())})}function w(){P.getFileWindow().click(function(e){var t=P.getSelected(P.getFilesGrid());t.length>0&&!$(e.target).closest("li").is(t)&&(P.unselect(t),L.getFileHandler().hideFileDetails(),P.hide(P.getPrimarySubmitButton()),P.hide(P.getFileManageMenu())),t=P.getSelected(P.getFilesList()),t.length>0&&!$(e.target).closest("tr").is(t)&&(P.unselectTableRow(t),P.hide(P.getPrimarySubmitButton()),P.hide(P.getFileManageMenu()))})}function k(){function e(e){return{37:function(){P.moveUp(P.getFilesGrid(),$(e.target))},39:function(){P.moveDown(P.getFilesGrid(),$(e.target))},13:function(){}}}function t(e){return{38:function(){P.moveUpInTable(P.getFilesList(),$(e.target))},40:function(){P.moveDownInTable(P.getFilesList(),$(e.target))},13:function(){}}}P.getFilesGrid().find("> li").keydown(function(t){var n=new e(t);n[t.which]&&n[t.which]()}),P.getFilesList().find("tbody > tr").keydown(function(e){var n=new t(e);n[e.which]&&n[e.which]()})}function b(e){function t(){function t(e){P.hide(P.getUploadFileLoadingBar()),L.getFileHandler().addFileOnUpload(e),n()}function i(){P.hide(P.getUploadFileLoadingBar()),P.show(P.getFileBrowserUploadForm())}P.show(P.getUploadFileLoadingBar()),P.hide(P.getFileBrowserUploadForm());var r=new FormData(P.getFileBrowserUploadForm()[0]);L.makeAjaxRequest(e.url,t,i,!1,r,!0)}function n(){P.hide(P.getFileBrowserUploadForm()),P.getUploadFileInput().val(""),P.getUploadFileParameterContainer().find("input").val("")}P.getUploadFileBtn().click(function(){P.getUploadFileInput().click()}),P.getUploadFileInput().on("change",function(){P.show(P.getFileBrowserUploadForm())}),P.getUploadFileToServerBtn().click(t),P.getCancelFileUploadBtn().click(n)}function x(){P.getViewFile().on("click",function(){var e=L.getFileHandler().getCurrentFileElement(),t=L.getFileHandler().getCurrentFileDetails();alert("selected"+e.attr("id")+", details :"+JSON.stringify(t))})}function C(e){var t=P.getDownloadFile();t.on("click",function(){1==e&&(t.attr("download",""),t.attr("href",L.getCurrentFilePath()))})}function R(e){P.getRenameFile().off("click"),P.getRenameFileOkay().off("click"),P.getRenameFileClose().off("click");var t,n;P.getRenameFile().on("click",function(){t=L.getFileHandler().getCurrentFileDetails(),n=L.getFileHandler().getCurrentFileElement(),P.show(P.getRenameFileBox()),P.getRenameFileInput().val(t.name)}),P.getRenameFileOkay().on("click",function(){function i(){P.hide(P.getRenameFileBox()),t.name=P.getRenameFileInput().val(),n.find("> div > div").text(P.getRenameFileInput().val())}function r(){alert("failed to rename")}L.makeAjaxRequest(e,i,r,!1,{name:P.getRenameFileInput().val()})}),P.getRenameFileClose().on("click",function(){P.hide(P.getRenameFileBox())})}function E(e){var t;P.getRemoveFile().off("click"),P.getRemoveFileOkay().off("click"),P.getRemoveFileClose().off("click"),P.getRemoveFile().on("click",function(){t=L.getFileHandler().getCurrentFileElement(),P.show(P.getRemoveFileBox())}),P.getRemoveFileOkay().on("click",function(){function n(){P.hide(P.getRemoveFileBox()),t.remove()}function i(){alert("failed to remove ")}L.makeAjaxRequest(e,n,i,!1,L.getFileHandler().getCurrentFileDetails())}),P.getRemoveFileClose().on("click",function(){P.hide(P.getRemoveFileBox())})}function S(){P.getFileManageMenu().on("click",function(){j($(this))}),B(P.getFileManageMenu(),P.getFileContextMenu())}function _(){function e(e,t){e.on("contextmenu",function(n){e.click(),j(e,t),n.preventDefault()})}P.getFilesList().find("tbody > tr").each(function(){e($(this),!0)}),P.getFilesGrid().find("li").each(function(){e($(this),!1)})}function j(e){var t=P.getFileContextMenu();P.show(t),H(e,t,124,500)}function B(e,t){$(document).on("click",function(n){e&&!e.is($(n.target))&&P.hide(t)})}function H(e,t,n,i){var r=i||e.offset().left,o=n||e.offset().top+e.height()/2,a=t.width()+4,l=t.height()+4,s=window.innerWidth,c=window.innerHeight;s-r<a?t.css("left",s-a+"px"):t.css("left",r+"px"),c-o<l?t.css("top",c-l+"px"):t.css("top",o+"px")}function O(){P.getErrorMessagePlaceHolder().empty(),P.hide(P.getPrimarySubmitButton()),L.getFileHandler().cleanUpView(),l()}var P=e("../helpers/element.js"),U=e("../helpers/util.js"),L=e("../handlers/handler.js");t.exports={attachRefreshFilesEvent:i,attachAlignFilesAsListEvent:r,attachAlignFilesAsGridEvent:o,attachSortFilesEvent:a,attachSearchFilesEvent:s,attachDiskElementEvent:u,attachKeysEventOnDirectories:g,attachClickEventOnDirectories:d,attachCreateDirectoryEvent:h,attachRenameDirectoryEvent:v,attachDeleteDirectoryEvent:m,attachClickEventOnFiles:F,attachKeysEventOnFiles:k,attachUploadFileEvent:b,attachClickEventToFilesInGrid:y,attachRenameFileEvent:R,attachRemoveFileEvent:E,attachViewFileEvent:x,attachDownloadFileEvent:C,attachFileContextMenuEvent:_,attachFileManageMenuEvent:S,resetView:O}},{"../handlers/handler.js":4,"../helpers/element.js":5,"../helpers/util.js":6}],4:[function(e,t,n){function i(e,t,n,i){P=e,U=t,L=n,A=i}function r(e,t,n,i,r){q=e||{},I=t||{},T=n||{},G=i||{},N=r||{}}function o(e){a(function(){l(),s(),c()},e)}function a(e,t){0==$("#disk-browser").length?($("body").append('<div id="disk-browser"></div>'),$("#disk-browser").load(M.getDiskBrowserPath()+"/partials/disk-browser.html",function(){e&&e()})):t&&e()}function l(){var e=M.getCreateNewDirectory();I.create?M.show(e):M.hide(e)}function s(){function e(){if(n())for(var e=0,i=T.upload.params.length;e<i;e++){var r=T.upload.params[e];M.getUploadFileParameterContainer().append($(t(r)))}}function t(e){return'<input type="text" placeholder="'+e.label+'" name="'+e.name+'" class="form-control"/>'}function n(){return"object"==typeof T.upload&&T.upload.params}var i=M.getUploadFileBtn();T.upload?(e(),M.show(i)):M.hide(i)}function c(){I.create&&A.attachCreateDirectoryEvent(I.create),T.upload&&A.attachUploadFileEvent(T.upload),A.attachRefreshFilesEvent(),A.attachSortFilesEvent(),A.attachAlignFilesAsListEvent(),A.attachAlignFilesAsGridEvent(),A.attachSearchFilesEvent()}function u(e){W=e||{},A.resetView(),0!=M.getDirectories().find("li").length&&z==e.disks||d(e)}function d(e){z=e.disks,q&&q.details&&q.details.length>0?P.loadDisks(q.details,e):P.noDiskSetup(q)}function f(){function e(e){U.loadDirectories(e),g()}function t(){}E(I.list,e,t,!0,{path:"/"})}function g(e){function t(e){L.loadFiles(e),h()}function n(){}var i=1!=e;E(T.list,t,n,i)}function h(){function e(e,t){return $('<option value="'+t+'">'+e+"</option>")}M.getSortFilesDropdown().empty(),M.getSortFilesDropdown().append(e("Sort by",""));var t=H();for(var n in t){var i=t[n];M.getSortFilesDropdown().append(e(i,n))}}function v(){A.attachDiskElementEvent()}function p(e){function t(){I.update&&A.attachRenameDirectoryEvent(e,I.update)}function n(){I.delete&&A.attachDeleteDirectoryEvent(I.delete)}e.is("ul")&&(e=e.find("> li")),A.attachKeysEventOnDirectories(e,I.list);var i="undefined"!=typeof I.delete;A.attachClickEventOnDirectories(e,I.list,i),t(),n()}function m(){function e(){var e=M.getRenameFile();T.update?(M.show(e),A.attachRenameFileEvent(T.update)):M.hide(e)}function t(){var e=M.getRemoveFile();T.destroy?(M.show(e),A.attachRemoveFileEvent(T.destroy)):M.hide(e)}function n(){var e=M.getDownloadFile();if(0!=T.absolute_path||T.download){M.show(e);var t=0!=T.absolute_path;A.attachDownloadFileEvent(t)}else M.hide(e)}function i(){var e=M.getViewFile();T.view?(M.show(e),A.attachViewFileEvent()):M.hide(e)}A.attachKeysEventOnFiles(),A.attachClickEventOnFiles(),1==W.context_menu&&A.attachFileContextMenuEvent(),A.attachFileManageMenuEvent(),e(),t(),n(),i()}function F(){return L}function y(){return U}function D(){return P}function w(){return A}function k(){return q&&1==q.search}function b(){return q}function x(e,t){return t=e.path||t,t+(t.endsWith("/")?"":"/")+e.name}function C(){var e=P.getRootPath();if("undefined"!=typeof e)return e+U.getCurrentDirectoryPath()}function R(){return x(L.getCurrentFileDetails(),C())}function E(e,t,n,i,r,o){function a(){var t={url:e,method:l,data:s,cache:i,beforeSend:function(e){if(G&&G.headers)for(var t in G.headers)e.setRequestHeader(t,G.headers[t])}};return 1==o&&(t.processData=!1,t.contentType=!1),t}var l="POST";"undefined"==typeof i&&(i=!0);var s=1!=o?B(r):j(r);S(!0),$.ajax(a()).success(function(e){t&&t(e),S(!1),M.getErrorMessagePlaceHolder().text("")}).fail(function(e){n&&n(e),S(!1),_(e)})}function S(e){1==e?(M.show(M.getLoadingBar()),M.deactivate(M.getFileBrowserBody())):(M.hide(M.getLoadingBar()),M.activate(M.getFileBrowserBody()))}function _(e){M.getErrorMessagePlaceHolder().empty();var t="Request could not be completed.";G.error&&(t=G.error(e.status,JSON.parse(e.responseText))||t),M.getErrorMessagePlaceHolder().text(t)}function j(e){var t=B();for(var n in t)e.append(n,t[n]);return e}function B(e){if(e=e||{},!e.disk){var t=P.getCurrentDisk();t&&(e.disk=t.name)}if(!e.path){var n=U.getCurrentDirectoryPath();n=n||"/",n&&(e.path=n)}var i=P.getRootDirectory();return i&&(e.path=i+("/"==e.path?"":e.path)),e}function H(){return{name:"Name",type:"Type",size:"size"+(T.size_unit?"("+T.size_unit+")":""),modified_at:"Last Modified Date"}}function O(e){e&&e.text&&e.onClick?(M.forceShow(M.getPrimarySubmitButton()),e.text=e.text||"Fetch path",M.getPrimarySubmitButton().text(e.text),M.getPrimarySubmitButton().off("click"),M.getPrimarySubmitButton().click(function(){e.onClick&&e.onClick(R()),M.hide(M.getPrimarySubmitButton()),M.closeModal()})):M.forceHide(M.getPrimarySubmitButton())}var P,U,L,A,M=e("../helpers/element.js"),q=(e("../helpers/util.js"),{}),I={},T={},G={},N={},W={},z=[];t.exports={setupHandlers:i,setupParameters:r,setupElementsAndEvents:o,setupEvents:c,load:u,loadFiles:g,loadDirectories:f,getFileHandler:F,getDiskHandler:D,getDirHandler:y,getEventHandler:w,getDiskParameter:b,isSearchEnabled:k,attachDiskElementEvents:v,attachDirectoryEvents:p,attachFileEvents:m,getAbsolutePath:x,makeAjaxRequest:E,getRootPathForCurrentDir:C,getCurrentFilePath:R,getFileResponseParams:H,updateButtonDetails:O}},{"../helpers/element.js":5,"../helpers/util.js":6}],5:[function(e,t,n){function i(){Fe=void 0,ye=void 0,De=void 0,we=void 0,ke=void 0,be=void 0,xe=void 0,Ce=void 0,Re=void 0,Ee=void 0,Se=void 0,_e=void 0,je=void 0,Be=void 0,$e=void 0,He=void 0,Oe=void 0,Pe=void 0,Ue=void 0,Le=void 0,Ae=void 0,Me=void 0,qe=void 0,Ie=void 0,Te=void 0,Ge=void 0,Ne=void 0,We=void 0,ze=void 0,Ve=void 0,Je=void 0,Ke=void 0,Xe=void 0,Ye=void 0,Qe=void 0,Ze=void 0,et=void 0,tt=void 0,nt=void 0,it=void 0,rt=void 0,ot=void 0,at=void 0}function r(){return Fe&&0!=Fe.length||(Fe=$("#FileBrowser")),Fe}function o(){return ye&&0!=ye.length||(ye=r().find("#fb-primary-btn")),ye}function a(){return De&&0!=De.length||(De=r().find("#loading_bar")),De}function l(){return ke&&0!=ke.length||(ke=r().find(".modal-body")),ke}function s(){return we&&0!=we.length||(we=r().find("#error_message")),we}function c(){return be&&0!=be.length||(be=r().find("#disk_selector")),be}function u(){return xe&&0!=xe.length||(xe=r().find(".directories")),xe}function d(){return Ce&&0!=Ce.length||(Ce=u().find("ul#directories-list")),Ce}function f(){return Re&&0!=Re.length||(Re=r().find("#fb_create_new_directory")),Re}function g(){return Ue&&0!=Ue.length||(Ue=r().find("#directory-context-menu")),Ue}function h(){return Le&&0!=Le.length||(Le=g().find("#remove-directory")),Le}function v(){return Ee&&0!=Ee.length||(Ee=r().find(".files")),Ee}function p(){return Se&&0!=Se.length||(Se=v().find("#files-list")),Se}function m(){return _e&&0!=_e.length||(_e=v().find("#files-grid")),_e}function F(){return nt&&0!=nt.length||(nt=r().find("#show-file-details")),nt}function y(){return Pe&&0!=Pe.length||(Pe=r().find("#fb_file_manage")),Pe}function D(){return je&&0!=je.length||(je=r().find("#file-context-menu")),je}function w(){return Oe&&0!=Oe.length||(Oe=D().find("#view-file")),Oe}function k(){return He&&0!=He.length||(He=D().find("#download-file")),He}function b(){return Be&&0!=Be.length||(Be=D().find("#rename-file")),Be}function x(){return $e&&0!=$e.length||($e=D().find("#remove-file")),$e}function C(){return Ae&&0!=Ae.length||(Ae=v().find("#rename-file-box")),Ae}function R(){return qe&&0!=qe.length||(qe=C().find("#rename-file-ok")),qe}function E(){return Me&&0!=Me.length||(Me=C().find("#rename-file-close")),Me}function S(){return Ie&&0!=Ie.length||(Ie=C().find("#rename-file-name")),Ie}function _(){return Te&&0!=Te.length||(Te=v().find("#remove-file-box")),Te}function j(){return Ne&&0!=Ne.length||(Ne=_().find("#remove-file-ok")),Ne}function B(){return Ge&&0!=Ge.length||(Ge=_().find("#remove-file-close")),Ge}function H(){return ze&&0!=ze.length||(ze=r().find("#upload_file")),ze}function O(){return We&&0!=We.length||(We=r().find("#upload_file_btn")),We}function P(){return Ve&&0!=Ve.length||(Ve=r().find("#cancel_file_upload")),Ve}function U(){return Xe&&0!=Xe.length||(Xe=r().find("#upload_file_parameters")),Xe}function L(){return Je&&0!=Je.length||(Je=r().find("#upload_file_to_Server")),Je}function A(){return Ke&&0!=Ke.length||(Ke=v().find("#file_browser_upload")),Ke}function M(){return Ye&&0!=Ye.length||(Ye=v().find("#upload_file_loading")),Ye}function q(){return Qe&&0!=Qe.length||(Qe=r().find("#fb_refresh")),Qe}function I(){return Ze&&0!=Ze.length||(Ze=r().find("#fb_align_list")),Ze}function T(){return et&&0!=et.length||(et=r().find("#fb_align_grid")),et}function G(){return tt&&0!=tt.length||(tt=r().find("#fb_sort_files")),tt}function N(){return it&&0!=it.length||(it=r().find("#fb_search_submit")),it}function W(){return rt&&0!=rt.length||(rt=r().find("#fb_search_cancel")),rt}function z(){return ot&&0!=ot.length||(ot=r().find("#fb_search_input")),ot}function V(){return at&&0!=at.length||(at=r().find("#fb_file_search_options")),at}function J(e){e.removeClass("hidden")}function K(e){e.addClass("hidden")}function X(e){e.removeClass("force-hidden")}function Y(e){e.addClass("force-hidden")}function Q(e,t){var n=!1,i=e.find("tbody > tr");return i.each(function(r){if($(this).is(t)&&r>0){var o=i[r-1];return ee(e,$(o)),n=!0,!1}}),n}function Z(e,t){var n=!1,i=e.find("tbody > tr");return i.each(function(r){if($(this).is(t)&&r<i.length-1){var o=i[r+1];return ee(e,$(o)),n=!0,!1}}),n}function ee(e,t){ce(e,t),t.click(),t.focus()}function te(e,t,n){function i(e,t){var n=e.closest("li");n.length>0&&(le(t),ie(n.closest("ul"),n))}var r=!1,o=e.find("li");return o.each(function(a){if($(this).is(t)){if(a>0){var l=o[a-1];ie(e,$(l))}else i(e,t);return n&&n(),r=!0,!1}}),r}function ne(e,t,n){function i(e,t){var n=e.closest("li").next();n.length>0&&(le(t),ie(n.closest("ul"),n))}var r=!1,o=e.find("li");return o.each(function(a){if($(this).is(t)){if(a<o.length-1){var l=o[a+1];ie(e,$(l))}else i(e,t);return n&&n(),r=!0,!1}}),r}function ie(e,t){oe(e,t),t.click(),t.focus()}function re(e){e.focus(),e.select()}function oe(e,t){e.find("li").removeClass("active"),t.addClass("active")}function ae(e){return e.find(".active")}function le(e){e.removeClass("active")}function se(e){e.find("li").removeClass("active"),e.find("li").eq(0).addClass("active")}function ce(e,t){e.find("tbody tr").removeClass("active"),t.addClass("active")}function ue(e){e.removeClass("active")}function de(e,t){r().modal({keyboard:!1,backdrop:"static"}),1==e&&(ge(),$(window).resize(function(){ge()}))}function fe(){var e=document.getElementsByTagName("SCRIPT"),t="";if(e&&e.length>0)for(var n in e)if(e[n].src&&e[n].src.match(/\/disk-browser\.js$/)){t=e[n].src.replace(/(.*)\/js\/disk-browser\.js$/,"$1");break}return t}function ge(){var e=r().find(".modal-content");$(window).width()>=800?(e.resizable({handles:"e, w",minWidth:900}),r().on("show.bs.modal",function(){$(this).find(".modal-body").css({"max-height":"100%"})}),r().resize(function(){r().find(".modal-content").css("height","auto")})):e.resizable("destroy")}function he(){r().modal("hide")}function ve(e){e.keydown(function(t){13==t.which&&e.focusout()})}function pe(e){e.addClass("deactivate")}function me(e){e.removeClass("deactivate")}var Fe,ye,De,we,ke,be,xe,Ce,Re,Ee,Se,_e,je,Be,$e,He,Oe,Pe,Ue,Le,Ae,Me,qe,Ie,Te,Ge,Ne,We,ze,Ve,Je,Ke,Xe,Ye,Qe,Ze,et,tt,nt,it,rt,ot,at;t.exports={getFileBrowser:r,getPrimarySubmitButton:o,getLoadingBar:a,getFileBrowserBody:l,getErrorMessagePlaceHolder:s,getDiskDropdown:c,getDirectoryWindow:u,getDirectories:d,getCreateNewDirectory:f,getFileWindow:v,getFilesList:p,getFilesGrid:m,getFileDetailsDiv:F,getFileManageMenu:y,getFileContextMenu:D,getViewFile:w,getDownloadFile:k,getRenameFile:b,getRemoveFile:x,getDirectoryContextMenu:g,getDeleteDirectory:h,getRenameFileBox:C,getRenameFileInput:S,getRenameFileClose:E,getRenameFileOkay:R,getRemoveFileBox:_,getRemoveFileClose:B,getRemoveFileOkay:j,getUploadFileBtn:O,getUploadFileInput:H,getFileBrowserUploadForm:A,getUploadFileParameterContainer:U,getUploadFileToServerBtn:L,getCancelFileUploadBtn:P,getUploadFileLoadingBar:M,getFileRefreshBtn:q,getFileAlignListBtn:I,getFileAlignGridBtn:T,getSortFilesDropdown:G,getSearchBtn:N,getSearchCancelBtn:W,getSearchInput:z,getFileSearchOptions:V,moveDown:ne,moveUp:te,moveDownInTable:Z,moveUpInTable:Q,focusAndSelect:re,focusoutOnEnter:ve,select:oe,selectFirst:se,getSelected:ae,unselect:le,selectTableRow:ce,unselectTableRow:ue,show:J,hide:K,forceShow:X,forceHide:Y,openModal:de,closeModal:he,activate:me,deactivate:pe,getDiskBrowserPath:fe,flush:i}},{}],6:[function(e,t,n){function i(e){return e.toLowerCase().replace(new RegExp(" ","g"),"_").replace(new RegExp("/","g"),"_").replace(".","_")}function r(e){return f(e.replace(new RegExp("_","g")," "))}function o(e){return"Image"==e}function a(e){var t=p[e];return t=t||"fa-file-o"}function l(e,t,n){return"number"==typeof e[n]?s(e,t,n):e[n]<t[n]?-1:e[n]>t[n]?1:0}function s(e,t,n){return e[n]-t[n]}function c(e,t,n){return"number"==typeof e[n]?u(e,t,n):e[n]>t[n]?-1:e[n]<t[n]?1:0}function u(e,t,n){return t[n]-e[n]}function d(e,t,n){return e.sort(function(e,i){return n?l(e,i,t):c(e,i,t)})}function f(e){return e.charAt(0).toUpperCase()+e.slice(1)}function g(e){for(var t=document.cookie,n=t.split(";"),i=0,r=n.length;i<r;i++){var o=n[i],a=o.split("=");if(a.length>0&&a[0]==e)return a[1]}}function h(e){var t=e.split(".").pop();for(var n in v)if(v[n].indexOf(t)>-1)return n}var v={Image:["jpg","png","gif","jpeg","tiff","bmp"],Excel:["xls","xlsx"],Text:["txt"],PDF:["pdf"],Word:["doc","docx"],Javascript:["js"],Css:["css"],JSON:["json"],xml:["xml"]},p={Image:"fa-file-image-o",Excel:"fa-file-excel-o",Text:"fa-file-text-o",PDF:"fa-file-pdf-o",Word:"fa-file-word-o",Javascript:"fa-file-code-o",Css:"fa-file-code-o",JSON:"fa-file-code-o",xml:"fa-file-code-o"};t.exports={slugify:i,unSlugify:r,isImage:o,getFontAwesomeClass:a,sortByType:d,getCookie:g,getFileType:h}},{}],7:[function(e,t,n){function i(e){var t=f(e.disks,g.disks,"disks");return 1==t&&e.disks&&(t=s(e.disks,g.disks)),t}function r(e){var t=f(e.directories,g.directories,"directories");return 1==t&&e.directories&&(t=s(e.directories,g.directories)),t}function o(e){var t=f(e.files,g.files,"files");return 1==t&&e.files&&(t=s(e.files,g.files)),t}function a(e){var t=f(e.http,g.http,"http");return 1==t&&e.http&&(t=s(e.http,g.http)),t}function l(e){var t=f(e.authentication,g.authentication,"authentication");return 1==t&&e.authentication&&(t=s(e.authentication,g.authentication)),t}function s(e,t){function n(e){var n=u(e,t.required);return 1==n?d(e,t.optional):n}var i=!0;if(c(t))for(var r=0,o=e.length;r<o&&(i=n(e[r]),1==i);r++);else i=n(e);return i}function c(e){return e.types.indexOf("array")>-1}function u(e,t){if(t)for(var n=0,i=t.length;n<i;n++){var r=t[n],o=f(e[r],g[r],r,!0);if(1!=o)return o}return!0}function d(e,t){if(t)for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e[r]){var o=f(e[r],g[r],r,!1);if(1!=o)return o}}return!0}function f(e,t,n,i){function r(){return"undefined"!=typeof e}function o(){return f=n+" parameter is mandatory.",i||t.field_required}function a(){return f=n+" parameter is of invalid type.",t.types.indexOf(typeof e)>-1}function l(){function i(){for(var t=!0,n=0,i=e.length;n<i&&(t=r(e[n]),t);n++);return t}function r(e){var i=!0;if("object"==typeof e&&t.required)for(var r=0,o=t.required.length;r<o;r++){var a=t.required[r];if(i="undefined"!=typeof e[a],!i){f=n+" parameter does not contain mandatory field : "+a+".";break}}return i}return c(t)?i():r(e)}function s(){return f=n+" should have a value","string"!=typeof e||!t.value||"string"==typeof e&&1==t.value&&""!=e}function u(){return f=n+" should have correct value","string"!=typeof e||!t.valid||"string"==typeof e&&t.valid&&t.valid.indexOf(e)>-1}function d(){return f=n+" should be boolean","boolean"!=typeof e||"boolean"==typeof e&&(1!=e||0!=e)}var f="";return!o()&&!r()||r()&&a()&&l()&&s()&&d()&&u()||f}var g={disks:{types:["object"],required:[],optional:["search","details","search_URL"],field_required:!1},details:{types:["array","object"],required:["name","label"],optional:["search_URL"],field_required:!1},directories:{types:["object"],required:["list"],optional:["destroy","upload","update"],field_required:!0},files:{types:["object"],required:["list"],optional:["destroy","upload","update","unit"],field_required:!0},name:{types:["string"],value:!0},label:{types:["string"],value:!0},list:{types:["string","object"],required:["url"],value:!0},upload:{types:["string","object"],required:["url","params"]},destroy:{types:["string","object"],required:["url"]},update:{types:["string","object"],required:["url"]},search:{types:["boolean"]},search_URL:{types:["string","object"],required:["url"],value:!0},params:{types:["object","array"]},unit:{types:["string"]},authentication:{types:["string"],field_required:!1,value:!0,valid:["session","basic"]},http:{types:["object"],field_required:!1,required:[]}};t.exports={disksParam:i,dirParam:r,filesParam:o,httpParam:a,authParam:l}},{}],8:[function(e,t,n){function i(){return{loadDirectories:r,showSubDirectories:o,hideSubDirectories:a,addNewDirectoryToSelectedDirectory:u,getNewDirectoryData:d,saveDirectory:f,removeDirectory:g,renameDirectory:c,getCurrentDirectoryElement:h,getCurrentDirectoryData:v,getCurrentDirectoryPath:p,getRootDirectory:b,childDirOpen:D,isRootDirectory:x,getDirectoryPathFor:m}}function r(e){S={},l(R.getDirectories(),e),E.attachDirectoryEvents(R.getDirectories()),R.selectFirst(R.getDirectories())}function o(e,t){0!=e.find("ul").length||x()||t&&t.length>0&&(e.append($("<ul></ul>")),s(e.find("ul"),t),E.attachDirectoryEvents(e.find("ul")))}function a(e){e.find("ul").remove()}function l(e,t){e.empty();var n=E.getDiskHandler().getAllowedDirectories();if(n)return void s(e,t,n);var i={id:"-root-",name:"..",path:""};S[i.id]=i,e.append($(w(i))),s(e,t)}function s(e,t,n){for(var i=0,r=t.length;i<r;i++){var o=t[i];if(!n||n.indexOf(o.name)!=-1){o.id=C.slugify(o.name);var a=w(o);e.append($(a)),S[o.id]=o}}}function c(e){var t=e.find("span.editable");return t.replaceWith('<input value="'+t.text()+'"/>'),e.find("input")}function u(){var e,t=h();return x()?e=t.closest("ul"):(0==t.find("> ul").length&&t.append($("<ul></ul>")),e=t.find("> ul")),e.append($(k())),e.find("input")}function d(e){y(e.closest("ul").closest("li"));return{name:e.val()}}function f(e,t,n){t||(t=e.val());var i=e.closest("div");i.attr("id",C.slugify(t)),e.replaceWith('<span class="editable">'+t+"</span>");var r={};return r.name=t,r.path=n,S[C.slugify(t)]=r,i.closest("li")}function g(e){var t=e;e.is("li")||(t=e.closest("li")),t.remove()}function h(){return R.getDirectories().find("li.active")}function v(){return y(h())}function p(){var e=h();return m(e)}function m(e){if(e&&e.length>0){if(x(e))return"";var t=F(e,[]),n="";if(t)for(var i=t.length-1;i>=0;i--)n+="/"+t[i];return n}}function F(e,t){var n=e.parent().closest("li"),i=y(e);if(i)return n.length>0&&!e.is(n)?(t.push(i.name),F(n,t)):(t.push(i.name),t)}function y(e){var t=e.find("> div").attr("id");if(t)return S[t]}function D(e){return e.find("ul").length>0}function w(e){return'<li tabindex="1" ><div id="'+e.id+'"><i class="fa fa-folder"></i><span class="editable" data-path="'+e.path+'">'+e.name+"</span></div></li>"}function k(e){return'<li tabindex="1" ><div><i class="fa fa-folder"></i><input value="untitled"/></div></li>'}function b(){return R.getDirectories().find("#-root-").closest("li")}function x(e){return e?"-root-"==e.find("> div").attr("id"):"-root-"==v().id;
}var C=e("../helpers/util.js"),R=e("../helpers/element.js"),E=e("../handlers/handler.js"),S={};t.exports=i},{"../handlers/handler.js":4,"../helpers/element.js":5,"../helpers/util.js":6}],9:[function(e,t,n){function i(){return{loadDisks:r,noDiskSetup:a,getCurrentDisk:l,getRootPath:s,getRootDirectory:u,isThisFileAllowed:f,getAllowedFilesFrom:d,isReadOnly:h,isRootReadOnly:v,getAllowedDirectories:c}}function r(e,t){function n(){var n=F.getDiskDropdown();n.empty(),D={};for(var r=0,a=e.length;r<a;r++){var l=e[r];l&&o(t,l.label)&&(l.id="disk_"+m.slugify(l.label),n.append($(i(e[r]))),l.path=l.path||w,D[l.id]=l)}n.find("option:first").attr("selected","selected")}function i(e){return'<option id="'+e.id+'" data-name="'+e.name+'" value="'+e.id+'">'+e.label+"</option>"}n(),y.attachDiskElementEvents()}function o(e,t){return!e||!e.disks||0==e.disks.length||e.disks.indexOf(t)!=-1}function a(e){D={disk_1:{id:"disk_1",search:e.search||k,path:e.path||w}}}function l(){var e=F.getDiskDropdown().find("option:selected").attr("id");return e?D[e]:D.disk_1}function s(){var e=l();if(e){var t=e.path.relative,n=e.path.root,i=e.path.cookie;if(n&&""!=n)return n;if(1==t)return e.name;if(i&&""!=i)return m.getCookie(i)}}function c(){var e=l();if(e)return e.allowed_directories}function u(){var e=l();if(e)return e.root_directory_path}function d(e,t){for(var n="undefined"==typeof t?l():g(t),i=[],r=0,o=e.length;r<o;r++){var a=e[r];f(a.name,n)&&i.push(a)}return i}function f(e,t){return!(t&&t.allowed_extensions&&t.allowed_extensions.length>0)||t.allowed_extensions.indexOf(p(e))!=-1}function g(e){var t="disk_"+m.slugify(e);return D[t]}function h(){return 1==l().read_only}function v(){return 1==l().root_read_only}function p(e){var t=e.split(".");return null!=t&&2==t.length?t[1]:""}var m=e("../helpers/util.js"),F=e("../helpers/element.js"),y=e("../handlers/handler.js"),D={},w={relative:!0},k=!1;t.exports=i},{"../handlers/handler.js":4,"../helpers/element.js":5,"../helpers/util.js":6}],10:[function(e,t,n){function i(){function e(){r.getFilesList().empty(),r.getFilesGrid().empty(),h()}function t(e){y=y||"grid",m=e,n()}function n(e,t){function n(e){function t(t){var i=e[t];if(i){i.id=o.slugify(i.name);var l='<li id="'+i.id+'" tabindex="1"><div>';i.type=i.type||o.getFileType(i.name);var s=a.getAbsolutePath(i,n);l+=o.isImage(i.type)?'<img src="'+s+'" alt="'+i.name+'"/>':'<i class="big-icon fa '+o.getFontAwesomeClass(i.type)+' fa-3x"></i>',l+="<div>"+i.name+"</div>",l+="</li>",r.getFilesGrid().append($(l))}}var n=a.getRootPathForCurrentDir(),i=c(!0);i.length=e.length,l(e,i,t);for(var s=0;s<i.length;s++)t(s)}function i(e){function t(t){var n=e[t];if(n){n.id=o.slugify(n.name),n.type=n.type||o.getFileType(n.name);var r=a.getAbsolutePath(n,i),s='<tr id="'+n.id+'" tabindex="1">';for(var c in a.getFileResponseParams())s+="<td>","name"==c&&(s+=o.isImage(n.type)?'<img src="'+r+'" alt="'+n.name+'"/>':'<i class="small-icon fa '+o.getFontAwesomeClass(n.type)+'"></i>'),s+=n[c],s+="</td>";s+="</tr>",l.append($(s))}}function n(){var e=$("<thead></thead>"),t=$("<tr></tr>"),n="";for(var i in a.getFileResponseParams())n+='<th id="'+i+'">'+a.getFileResponseParams()[i]+"<span></span></th>";t.append($(n)),e.append(t),r.getFilesList().append(e),r.getFilesList().append($("<tbody></tbody>")),r.getFilesList().find("thead").find("th").click(function(){var e=$(this).hasClass("asc");s($(this).attr("id"),!e)})}var i=a.getRootPathForCurrentDir();n();var l=r.getFilesList().find("tbody"),u=c(!1);u.length=e.length;for(var d=0,f=u.length;d<f;d++)t(d)}function l(e,t,n){0!=t.stepUpNumber&&e.length>t.stepUpNumber&&(t.length=t.stepUpNumber,r.getFileWindow().unbind("scroll"),r.getFileWindow().scroll(function(i){var o=u(t);if(e.length>t.length){if(o>t.length-t.numberX*t.numberY){for(var l=Math.round(t.length);l<t.length+t.stepUpNumber||l<e.length;l++)n(l);t.length=t.length+t.stepUpNumber}a.getEventHandler().attachClickEventToFilesInGrid()}else r.getFileWindow().off("scroll")}))}function c(e){var t={},n=r.getFileWindow();return e?(t.height=104,t.width=120):(t.width=n.width(),t.height=37),n.width()>=t.width?(t.numberX=n.width()/t.width,t.numberY=n.height()/t.height,t.stepUpNumber=t.numberX*(t.numberY+1)):t.stepUpNumber=0,t}function u(e){var t=r.getFileWindow(),n=t.scrollTop();return(n/e.height+e.numberY)*e.numberX}function d(){"grid"==y?r.show(r.getFilesGrid()):r.show(r.getFilesList())}function f(){r.getFilesGrid().empty(),r.getFilesList().empty(),r.hide(r.getFilesGrid()),r.hide(r.getFilesList())}f(),F=e?e:JSON.parse(JSON.stringify(m));var g=a.getDiskHandler().getAllowedFilesFrom(F,t);i(g),n(g),d(),a.attachFileEvents()}function i(){y="list",r.hide(r.getFilesGrid()),r.show(r.getFilesList())}function l(){y="grid",r.show(r.getFilesGrid()),r.hide(r.getFilesList())}function s(e,t){function i(){r.getFilesList().find("th").each(function(){var n=$(this);if(n.removeClass("asc").removeClass("desc"),n.attr("id")==e&&""!=e)return t?n.addClass("asc"):n.addClass("desc"),!1})}if(t="undefined"==typeof t||t,h(!0),""==e)n(),i();else{var a=o.sortByType(F,e,t);n(a),i()}}function c(e){for(var t=[],i=0,r=m.length;i<r;i++){var o=m[i];o.name.toLowerCase().indexOf(e.toLowerCase())>-1&&t.push(o)}n(t)}function u(e){function t(e,t){return"<li><label>"+e+":&nbsp;</label><span>"+t+"</span><span>&nbsp;</span></li>"}var n=r.getFileDetailsDiv();n.empty(),r.show(n);for(var i in a.getFileResponseParams())n.append($(t(a.getFileResponseParams()[i],e[i])))}function d(){var e=r.getFileDetailsDiv();e.empty(),r.hide(e)}function f(){for(var e="list"==y?r.getFilesList():r.getFilesGrid(),t=e.find(".active"),n=t.attr("id"),i=0,o=F.length;i<o;i++){var a=F[i];if(a.id==n)return a}return{}}function g(){var e="list"==y?r.getFilesList():r.getFilesGrid();return e.find(".active")}function h(e){e||r.getSortFilesDropdown().val(""),r.unselect(g()),d(),r.hide(r.getFileManageMenu())}function v(){var e;e="list"==y?r.getFilesList().find("tbody > tr:first-child"):r.getFilesGrid().find("li:first-child"),e.click(),e.focus()}function p(e){m.push(e),n()}var m=[],F=[],y="grid";return{loadFiles:t,showFiles:n,showFileList:i,showFileGrid:l,searchFiles:c,sortFilesBy:s,showFileDetails:u,hideFileDetails:d,getCurrentFileDetails:f,getCurrentFileElement:g,cleanUpView:h,clearAllFiles:e,focusFirstElement:v,addFileOnUpload:p}}var r=e("../helpers/element.js"),o=e("../helpers/util.js"),a=e("../handlers/handler.js");t.exports=i},{"../handlers/handler.js":4,"../helpers/element.js":5,"../helpers/util.js":6}]},{},[1]);